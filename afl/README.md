# Dynamic Component

## Instructions
1. Use the llvm_mode to instrument the original internal functions and prepare for the fuzzing. The static analysis result is applied for the scope-awareness.
Note that, different internal function sets might need their own ways for the compilation and instrumentation.
For example, to instrument PHP internal functions, you are required to replace the CC environment variable to `afl-clang-fast` generated in llvm_mode.
```sh
# download the source code of interpreter.
./afl-clang-fast 
```
2. Put the static analysis result file in the name of `static.txt` under ` hybrid_metric/llvm_mode/`. The instrumentation tool will uses it to guide the instrumentation.

## Test
You can run our scope-aware fuzzing with the basic afl commands.
Note that the testing is tool dependent.
The cross-check requires feeding the inputs generated by the fuzzer to the SE tool.
SE tools take inputs in different forms.
To fuzz PHP internal functions, we create a rapper function that accepts random inputs of afl.
This part refers to [link](https://www.tripwire.com/state-of-security/vert/fuzzing-php-for-fun-and-profit/).
```sh
afl-fuzz -i input -o out -m none -- ./sapi/cli/php php/driver.php
```
